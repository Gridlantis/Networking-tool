<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Google tag (gtag.js) -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-WJY2R19PWC"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "G-WJY2R19PWC");
    </script>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      name="description"
      content="Gridlantis Networker provides comprehensive network tools including IP lookup, subnet calculator, network diagnostics, and IP address management for IT professionals."
    />
    <meta
      name="keywords"
      content="IP calculator, subnet calculator, network tools, IP lookup, network diagnostics, IP management, IT tools"
    />
    <meta name="author" content="Gridlantis" />

    <!-- Open Graph / Facebook Meta Tags -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://gridlantis.com/networker" />
    <meta
      property="og:title"
      content="Gridlantis Networker - Advanced IP Tools & Network Calculator"
    />
    <meta
      property="og:description"
      content="Comprehensive network tools including IP lookup, subnet calculator, and IP management for IT professionals."
    />
    <meta
      property="og:image"
      content="../gridlantis.com/images/networker-preview.png"
    />

    <!-- Twitter Meta Tags -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:url" content="https://gridlantis.com/networker" />
    <meta
      name="twitter:title"
      content="Gridlantis Networker - Advanced IP Tools & Network Calculator"
    />
    <meta
      name="twitter:description"
      content="Comprehensive network tools including IP lookup, subnet calculator, and IP management for IT professionals."
    />
    <meta
      name="twitter:image"
      content="../gridlantis.com/images/networker-preview.png"
    />
    <title>Gridlantis Networker - Advanced IP Tools & Network Calculator</title>
    <link rel="icon" href="favicon.html" type="image/x-icon" />
    <link rel="apple-touch-icon" href="apple-touch-icon.html" />

    <!-- Canonical URL -->
    <link rel="canonical" href="../gridlantis.com/networker" />

    <!-- Preconnect to external domains -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link rel="preconnect" href="https://cdnjs.cloudflare.com" />
    <link rel="preconnect" href="https://cdn.jsdelivr.net" />

    <!-- Fonts with fallback -->
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />

    <!-- Preload critical resources -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Gridlantis Networker",
        "description": "Advanced network tools including IP lookup, subnet calculator, and IP management",
        "url": "https://gridlantis.com/networker",
        "applicationCategory": "NetworkUtility",
        "operatingSystem": "Web",
        "offers": {
          "@type": "Offer",
          "price": "0",
          "priceCurrency": "USD"
        }
      }
    </script>
    <style>
      :root {
        --primary-color: #30d158;
        --secondary-color: #32d74b;
        --accent-color: #64d2ff;
        --light-color: #f5f5f7;
        --dark-color: #ffffff;
        --surface-color: #f5f5f7;
        --card-bg: #ffffff;
        --success-color: #30d158;
        --danger-color: #ff453a;
        --warning-color: #ff9f0a;
        --info-color: #0a84ff;
        --border-radius: 12px;
        --box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        --transition: all 0.3s ease;
        --text-primary: #1d1d1f;
        --text-secondary: #86868b;
        --border-color: #d2d2d7;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI",
          Roboto, Helvetica, Arial, sans-serif;
        background-color: var(--surface-color);
        color: var(--text-primary);
        line-height: 1.6;
        position: relative;
        overflow-x: hidden;
      }

      body.dark-mode {
        --light-color: #1d1d1f;
        --dark-color: #000000;
        --surface-color: #000000;
        --card-bg: #1d1d1f;
        --text-primary: #f5f5f7;
        --text-secondary: #86868b;
        --border-color: #424245;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 2rem;
        position: relative;
      }

      header {
        text-align: center;
        margin-bottom: 3rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
        position: relative;
      }

      h1 {
        color: var(--text-primary);
        font-size: 2.5rem;
        margin-bottom: 0.5rem;
        font-weight: 600;
        letter-spacing: -0.5px;
      }

      .subtitle {
        color: var(--text-secondary);
        font-weight: 400;
        font-size: 1.1rem;
      }

      /* Navigation Tabs */
      .nav-tabs {
        display: flex;
        flex-wrap: wrap;
        gap: 0;
        margin-bottom: 2rem;
        background-color: var(--card-bg);
        border-radius: var(--border-radius);
        padding: 0.5rem;
        box-shadow: var(--box-shadow);
      }

      .tab-btn {
        background: transparent;
        border: none;
        color: var(--text-secondary);
        padding: 0.75rem 1.5rem;
        cursor: pointer;
        font-size: 0.95rem;
        font-weight: 500;
        transition: var(--transition);
        position: relative;
        border-radius: 8px;
        flex: 1;
        text-align: center;
      }

      .tab-btn:hover {
        color: var(--text-primary);
        background-color: rgba(48, 209, 88, 0.05);
      }

      .tab-btn.active {
        color: var(--primary-color);
        background-color: rgba(48, 209, 88, 0.1);
      }

      .tab-content {
        display: none;
      }

      .tab-content.active {
        display: block;
      }

      .card {
        background: var(--card-bg);
        border-radius: var(--border-radius);
        box-shadow: var(--box-shadow);
        padding: 1.5rem;
        margin-bottom: 1.5rem;
        transition: var(--transition);
        border: 1px solid var(--border-color);
        position: relative;
        overflow: hidden;
      }

      .card:hover {
        box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
        transform: translateY(-2px);
      }

      .card-header {
        display: flex;
        align-items: center;
        margin-bottom: 1.5rem;
        padding-bottom: 1rem;
        border-bottom: 1px solid var(--border-color);
        position: relative;
      }

      .card-icon {
        background-color: var(--primary-color);
        color: white;
        width: 40px;
        height: 40px;
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-right: 1rem;
        font-size: 1.2rem;
      }

      h2 {
        color: var(--text-primary);
        font-size: 1.5rem;
        font-weight: 600;
        letter-spacing: -0.3px;
      }

      .form-group {
        margin-bottom: 1.5rem;
        position: relative;
      }

      label {
        display: block;
        margin-bottom: 0.5rem;
        font-weight: 500;
        color: var(--text-primary);
        font-size: 0.95rem;
      }

      input,
      select,
      textarea {
        width: 100%;
        padding: 0.75rem 1rem;
        background-color: var(--card-bg);
        border: 1px solid var(--border-color);
        border-radius: 8px;
        font-size: 1rem;
        transition: var(--transition);
        color: var(--text-primary);
        font-family: inherit;
      }

      input:focus,
      select:focus,
      textarea:focus {
        outline: none;
        border-color: var(--primary-color);
        box-shadow: 0 0 0 3px rgba(48, 209, 88, 0.2);
      }

      .btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        padding: 0.75rem 1.5rem;
        background-color: var(--primary-color);
        color: white;
        border: none;
        border-radius: 8px;
        font-size: 1rem;
        font-weight: 500;
        cursor: pointer;
        transition: var(--transition);
        font-family: inherit;
        letter-spacing: -0.2px;
        position: relative;
        overflow: hidden;
      }

      .btn:hover {
        background-color: var(--secondary-color);
        transform: translateY(-1px);
      }

      .btn i {
        margin-right: 0.5rem;
      }

      .btn-danger {
        background-color: var(--danger-color);
      }

      .btn-danger:hover {
        background-color: #ff3b30;
      }

      .btn-warning {
        background-color: var(--warning-color);
      }

      .btn-warning:hover {
        background-color: #ff9500;
      }

      .btn-secondary {
        background-color: #8e8e93;
      }

      .btn-secondary:hover {
        background-color: #7c7c80;
      }

      .btn-info {
        background-color: var(--info-color);
      }

      .btn-info:hover {
        background-color: #007aff;
      }

      .btn-group {
        display: flex;
        gap: 0.5rem;
      }

      .result-box {
        background-color: var(--card-bg);
        border-radius: var(--border-radius);
        padding: 1.5rem;
        margin-top: 1rem;
        border-left: 4px solid var(--primary-color);
        position: relative;
        font-family: "SF Mono", "Monaco", "Inconsolata", "Roboto Mono",
          monospace;
        font-size: 0.9rem;
        box-shadow: var(--box-shadow);
      }

      .result-item {
        margin-bottom: 0.75rem;
        display: flex;
      }

      .result-label {
        font-weight: 500;
        color: var(--text-primary);
        min-width: 150px;
      }

      table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 1rem;
        font-family: "SF Mono", "Monaco", "Inconsolata", "Roboto Mono",
          monospace;
        font-size: 0.9rem;
      }

      th,
      td {
        padding: 0.75rem;
        text-align: left;
        border-bottom: 1px solid var(--border-color);
      }

      th {
        background-color: var(--card-bg);
        font-weight: 500;
        color: var(--text-primary);
        cursor: pointer;
        user-select: none;
        letter-spacing: -0.2px;
      }

      th:hover {
        background-color: rgba(48, 209, 88, 0.05);
      }

      th.sorted-asc::after {
        content: " ↑";
        font-size: 0.8em;
      }

      th.sorted-desc::after {
        content: " ↓";
        font-size: 0.8em;
      }

      tr:hover {
        background-color: rgba(48, 209, 88, 0.03);
      }

      .empty-state {
        text-align: center;
        padding: 2rem;
        color: var(--text-secondary);
      }

      .empty-state i {
        font-size: 3rem;
        margin-bottom: 1rem;
        color: var(--text-secondary);
      }

      .grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 1.5rem;
        margin-bottom: 1.5rem;
      }

      .loading {
        display: inline-block;
        width: 20px;
        height: 20px;
        border: 3px solid rgba(48, 209, 88, 0.3);
        border-radius: 50%;
        border-top-color: var(--primary-color);
        animation: spin 1s ease-in-out infinite;
        margin-left: 0.5rem;
      }

      .tag {
        display: inline-block;
        padding: 0.25rem 0.5rem;
        border-radius: 50px;
        font-size: 0.75rem;
        font-weight: 500;
        background-color: rgba(142, 142, 147, 0.1);
        color: var(--text-primary);
      }

      .tag-primary {
        background-color: rgba(48, 209, 88, 0.1);
        color: var(--primary-color);
      }

      .tag-success {
        background-color: rgba(48, 209, 88, 0.1);
        color: var(--success-color);
      }

      .tag-warning {
        background-color: rgba(255, 159, 10, 0.1);
        color: var(--warning-color);
      }

      .tag-danger {
        background-color: rgba(255, 69, 58, 0.1);
        color: var(--danger-color);
      }

      .tag-info {
        background-color: rgba(10, 132, 255, 0.1);
        color: var(--info-color);
      }

      .dark-mode-toggle {
        background: none;
        border: none;
        font-size: 1.5rem;
        cursor: pointer;
        color: var(--text-primary);
        transition: var(--transition);
        padding: 0.5rem;
        border-radius: 50%;
        background-color: var(--card-bg);
        box-shadow: var(--box-shadow);
      }

      .dark-mode-toggle:hover {
        background-color: rgba(48, 209, 88, 0.1);
        color: var(--primary-color);
      }

      .chart-container {
        height: 200px;
        margin-top: 1rem;
      }

      .copy-btn {
        position: absolute;
        top: 0.5rem;
        right: 0.5rem;
        background: none;
        border: none;
        color: var(--primary-color);
        cursor: pointer;
        font-size: 0.9rem;
        transition: var(--transition);
        padding: 0.5rem;
        border-radius: 6px;
      }

      .copy-btn:hover {
        background-color: rgba(48, 209, 88, 0.1);
      }

      .section-toggle {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1rem;
      }

      .toggle-btn {
        background: none;
        border: none;
        color: var(--primary-color);
        cursor: pointer;
        font-size: 0.9rem;
        display: flex;
        align-items: center;
        gap: 0.3rem;
        font-weight: 500;
        padding: 0.5rem;
        border-radius: 6px;
      }

      .toggle-btn:hover {
        background-color: rgba(48, 209, 88, 0.1);
      }

      .hidden {
        display: none;
      }

      /* Terminal-like elements */
      .terminal-effect {
        position: relative;
        padding: 1.5rem;
        border-radius: var(--border-radius);
        background-color: var(--card-bg);
        border: 1px solid var(--border-color);
        font-family: "SF Mono", "Monaco", "Inconsolata", "Roboto Mono",
          monospace;
        overflow: hidden;
        box-shadow: var(--box-shadow);
      }

      /* Progress bar */
      .progress-container {
        width: 100%;
        background-color: var(--border-color);
        border-radius: 8px;
        margin: 1rem 0;
        overflow: hidden;
      }

      .progress-bar {
        height: 8px;
        background: linear-gradient(
          90deg,
          var(--primary-color),
          var(--secondary-color)
        );
        border-radius: 8px;
        width: 0%;
        transition: width 0.5s ease;
      }

      /* Tooltip */
      .tooltip {
        position: relative;
        display: inline-block;
      }

      .tooltip .tooltiptext {
        visibility: hidden;
        width: 200px;
        background-color: var(--card-bg);
        color: var(--text-primary);
        text-align: center;
        border-radius: var(--border-radius);
        padding: 0.5rem;
        position: absolute;
        z-index: 1;
        bottom: 125%;
        left: 50%;
        margin-left: -100px;
        opacity: 0;
        transition: opacity 0.3s;
        border: 1px solid var(--border-color);
        font-size: 0.8rem;
        box-shadow: var(--box-shadow);
      }

      .tooltip:hover .tooltiptext {
        visibility: visible;
        opacity: 1;
      }

      /* Animations */
      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }

      @keyframes blink {
        0%,
        100% {
          opacity: 1;
        }
        50% {
          opacity: 0;
        }
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(-10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @keyframes fadeOut {
        from {
          opacity: 1;
          transform: translateY(0);
        }
        to {
          opacity: 0;
          transform: translateY(-10px);
        }
      }

      /* Responsive styles */
      @media (max-width: 768px) {
        .container {
          padding: 1rem;
        }

        .grid {
          grid-template-columns: 1fr;
        }

        header {
          flex-direction: column;
          align-items: flex-start;
        }

        .dark-mode-toggle {
          align-self: flex-end;
          margin-top: -3rem;
          margin-bottom: 1rem;
        }

        h1 {
          font-size: 2rem;
        }

        .btn {
          padding: 0.5rem 1rem;
          font-size: 0.9rem;
        }

        .nav-tabs {
          overflow-x: auto;
          white-space: nowrap;
          padding-bottom: 0.5rem;
        }
      }

      /* Apple-style elements */
      .apple-gradient {
        background: linear-gradient(135deg, #30d158 0%, #32d74b 100%);
      }

      .glass-effect {
        background: rgba(255, 255, 255, 0.8);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
      }

      body.dark-mode .glass-effect {
        background: rgba(29, 29, 31, 0.8);
      }
    </style>
  </head>
  <body>
    <div class="container">
      <header>
        <div>
          <h1>Gridlantis Networker</h1>
          <p class="subtitle">Advanced network diagnostics toolkit</p>
        </div>
        <button
          class="dark-mode-toggle"
          id="darkModeToggle"
          aria-label="Toggle dark mode"
        >
          <i class="fas fa-moon"></i>
        </button>
      </header>

      <!-- Navigation Tabs -->
      <div class="nav-tabs">
        <button class="tab-btn active" data-tab="network-tools">
          <i class="fas fa-network-wired"></i> Network Tools
        </button>
        <button class="tab-btn" data-tab="ip-management">
          <i class="fas fa-save"></i> IP Management
        </button>
        <button class="tab-btn" data-tab="security-tools">
          <i class="fas fa-shield-alt"></i> Security Tools
        </button>
        <button class="tab-btn" data-tab="utilities">
          <i class="fas fa-tools"></i> Utilities
        </button>
      </div>

      <!-- Network Tools Tab -->
      <div class="tab-content active" id="network-tools">
        <div class="grid">
          <div class="card" id="networkInfoCard">
            <div class="section-toggle">
              <div class="card-header">
                <div class="card-icon">
                  <i class="fas fa-network-wired"></i>
                </div>
                <h2>Network Scan</h2>
              </div>
              <button class="toggle-btn" id="toggleNetworkInfo">
                <i class="fas fa-eye-slash"></i> Toggle
              </button>
            </div>
            <div id="ipResult" class="terminal-effect">
              <p>Initiating network scan...</p>
              <div class="loading" style="display: inline-block"></div>
            </div>
            <div class="chart-container">
              <canvas id="ipChart"></canvas>
            </div>
          </div>

          <div class="card">
            <div class="card-header">
              <div class="card-icon">
                <i class="fas fa-calculator"></i>
              </div>
              <h2>Subnet Analyzer</h2>
            </div>
            <div class="form-group">
              <label for="ipAddress">Target IP</label>
              <input type="text" id="ipAddress" placeholder="192.168.1.1" />
            </div>
            <div class="form-group">
              <label for="subnetInputType">Input Type</label>
              <select id="subnetInputType" onchange="changeSubnetInputType()">
                <option value="subnetMask">Subnet Mask</option>
                <option value="cidr">CIDR Notation</option>
              </select>
            </div>
            <div class="form-group" id="subnetMaskGroup">
              <label for="subnetMask">Subnet Mask</label>
              <input type="text" id="subnetMask" placeholder="255.255.255.0" />
            </div>
            <div class="form-group" id="cidrGroup" style="display: none">
              <label for="cidr">CIDR</label>
              <input type="text" id="cidr" placeholder="24" />
            </div>
            <button class="btn" onclick="calculateSubnet()">
              <i class="fas fa-calculator"></i> Analyze
            </button>
            <div id="subnetResult" style="display: none"></div>
          </div>
        </div>

        <div class="card">
          <div class="card-header">
            <div class="card-icon">
              <i class="fas fa-globe"></i>
            </div>
            <h2>IP Tracer</h2>
          </div>
          <div class="form-group">
            <label for="lookupIp">Target IP/Hostname</label>
            <div style="display: flex; gap: 0.5rem">
              <input type="text" id="lookupIp" placeholder="Enter target" />
              <button
                class="btn"
                id="lookupBtn"
                onclick="lookupIp()"
                style="flex: 0 0 auto"
              >
                <i class="fas fa-search"></i> Trace
              </button>
            </div>
          </div>
          <div id="lookupResult" style="display: none"></div>
        </div>

        <!-- NEW: Port Scanner -->
        <div class="card">
          <div class="card-header">
            <div class="card-icon">
              <i class="fas fa-plug"></i>
            </div>
            <h2>Port Scanner</h2>
          </div>
          <div class="form-group">
            <label for="portScanHost">Target Host</label>
            <input
              type="text"
              id="portScanHost"
              placeholder="example.com or 192.168.1.1"
            />
          </div>
          <div class="form-group">
            <label for="portRange">Port Range</label>
            <div style="display: flex; gap: 0.5rem">
              <input
                type="number"
                id="portStart"
                placeholder="1"
                min="1"
                max="65535"
                value="1"
              />
              <span style="display: flex; align-items: center">-</span>
              <input
                type="number"
                id="portEnd"
                placeholder="100"
                min="1"
                max="65535"
                value="100"
              />
            </div>
          </div>
          <button class="btn" onclick="scanPorts()">
            <i class="fas fa-search"></i> Scan Ports
          </button>
          <div
            class="progress-container"
            id="portScanProgress"
            style="display: none"
          >
            <div class="progress-bar" id="portScanProgressBar"></div>
          </div>
          <div id="portScanResult" style="display: none"></div>
        </div>
      </div>

      <!-- IP Management Tab -->
      <div class="tab-content" id="ip-management">
        <div class="card">
          <div class="card-header">
            <div class="card-icon">
              <i class="fas fa-save"></i>
            </div>
            <h2>IP Database</h2>
          </div>
          <div class="form-group">
            <label for="ipToSave">IP to Store</label>
            <div style="display: flex; gap: 0.5rem; margin-bottom: 0.5rem">
              <input
                type="text"
                id="ipToSave"
                placeholder="Enter IP"
                style="flex: 1"
              />
              <button class="btn" onclick="saveIP()" style="flex: 0 0 auto">
                <i class="fas fa-save"></i> Store
              </button>
            </div>
            <div style="display: flex; gap: 0.5rem">
              <input
                type="text"
                id="ipTag"
                placeholder="Tag (optional)"
                style="flex: 1"
              />
              <select id="ipCategory" style="flex: 1">
                <option value="">Select Category</option>
                <option value="work">Work</option>
                <option value="personal">Personal</option>
                <option value="server">Server</option>
                <option value="other">Other</option>
              </select>
            </div>
          </div>
          <div
            style="
              display: flex;
              justify-content: space-between;
              align-items: center;
              margin-top: 1.5rem;
            "
          >
            <h3>Stored IP Addresses</h3>
            <div class="btn-group">
              <button class="btn btn-warning" onclick="exportIPs()">
                <i class="fas fa-file-export"></i> Export
              </button>
              <button class="btn btn-danger" onclick="clearIPs()">
                <i class="fas fa-trash"></i> Purge
              </button>
            </div>
          </div>
          <div id="savedIPsContainer">
            <table id="savedIPs">
              <thead>
                <tr>
                  <th onclick="sortTable(0)">IP Address</th>
                  <th onclick="sortTable(1)">Tag</th>
                  <th onclick="sortTable(2)">Category</th>
                  <th onclick="sortTable(3)">Date Stored</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="savedIPsBody">
                <!-- Saved IPs will appear here -->
              </tbody>
            </table>
            <div id="emptyState" class="empty-state" style="display: none">
              <i class="fas fa-inbox"></i>
              <p>Database Empty</p>
            </div>
          </div>
        </div>

        <!-- NEW: IP Range Generator -->
        <div class="card">
          <div class="card-header">
            <div class="card-icon">
              <i class="fas fa-list-ol"></i>
            </div>
            <h2>IP Range Generator</h2>
          </div>
          <div class="form-group">
            <label for="rangeStart">Start IP</label>
            <input type="text" id="rangeStart" placeholder="192.168.1.1" />
          </div>
          <div class="form-group">
            <label for="rangeEnd">End IP</label>
            <input type="text" id="rangeEnd" placeholder="192.168.1.254" />
          </div>
          <button class="btn" onclick="generateIPRange()">
            <i class="fas fa-cogs"></i> Generate Range
          </button>
          <div id="ipRangeResult" style="display: none"></div>
        </div>
      </div>

      <!-- Security Tools Tab -->
      <div class="tab-content" id="security-tools">
        <!-- NEW: Password Strength Tester -->
        <div class="card">
          <div class="card-header">
            <div class="card-icon">
              <i class="fas fa-lock"></i>
            </div>
            <h2>Password Strength Tester</h2>
          </div>
          <div class="form-group">
            <label for="passwordInput">Test Password</label>
            <div style="display: flex; gap: 0.5rem">
              <input
                type="password"
                id="passwordInput"
                placeholder="Enter password"
                style="flex: 1"
              />
              <button
                class="btn"
                onclick="togglePasswordVisibility()"
                style="flex: 0 0 auto"
              >
                <i class="fas fa-eye"></i>
              </button>
            </div>
          </div>
          <div class="progress-container">
            <div class="progress-bar" id="passwordStrengthBar"></div>
          </div>
          <div id="passwordStrengthResult" style="margin-top: 1rem"></div>
        </div>

        <!-- NEW: Hash Generator -->
        <div class="card">
          <div class="card-header">
            <div class="card-icon">
              <i class="fas fa-fingerprint"></i>
            </div>
            <h2>Hash Generator</h2>
          </div>
          <div class="form-group">
            <label for="hashInput">Input Text</label>
            <textarea
              id="hashInput"
              placeholder="Enter text to hash"
              rows="3"
              style="width: 100%; resize: vertical"
            ></textarea>
          </div>
          <div class="form-group">
            <label for="hashAlgorithm">Algorithm</label>
            <select id="hashAlgorithm">
              <option value="md5">MD5</option>
              <option value="sha1">SHA-1</option>
              <option value="sha256">SHA-256</option>
              <option value="sha512">SHA-512</option>
            </select>
          </div>
          <button class="btn" onclick="generateHash()">
            <i class="fas fa-hashtag"></i> Generate Hash
          </button>
          <div id="hashResult" style="display: none"></div>
        </div>
      </div>

      <!-- Utilities Tab -->
      <div class="tab-content" id="utilities">
        <!-- NEW: Base64 Encoder/Decoder -->
        <div class="card">
          <div class="card-header">
            <div class="card-icon">
              <i class="fas fa-code"></i>
            </div>
            <h2>Base64 Encoder/Decoder</h2>
          </div>
          <div class="form-group">
            <label for="base64Input">Input Text</label>
            <textarea
              id="base64Input"
              placeholder="Enter text to encode/decode"
              rows="3"
              style="width: 100%; resize: vertical"
            ></textarea>
          </div>
          <div class="btn-group" style="margin-bottom: 1rem">
            <button class="btn" onclick="base64Encode()">
              <i class="fas fa-lock"></i> Encode
            </button>
            <button class="btn" onclick="base64Decode()">
              <i class="fas fa-lock-open"></i> Decode
            </button>
          </div>
          <div id="base64Result" style="display: none"></div>
        </div>

        <!-- NEW: URL Parser -->
        <div class="card">
          <div class="card-header">
            <div class="card-icon">
              <i class="fas fa-link"></i>
            </div>
            <h2>URL Parser</h2>
          </div>
          <div class="form-group">
            <label for="urlInput">URL to Parse</label>
            <input
              type="text"
              id="urlInput"
              placeholder="https://example.com/path?query=value"
            />
          </div>
          <button class="btn" onclick="parseURL()">
            <i class="fas fa-cut"></i> Parse URL
          </button>
          <div id="urlParseResult" style="display: none"></div>
        </div>

        <!-- NEW: Network Speed Test -->
        <div class="card">
          <div class="card-header">
            <div class="card-icon">
              <i class="fas fa-tachometer-alt"></i>
            </div>
            <h2>Network Speed Test</h2>
          </div>
          <button class="btn" onclick="runSpeedTest()">
            <i class="fas fa-bolt"></i> Start Speed Test
          </button>
          <div
            class="progress-container"
            id="speedTestProgress"
            style="display: none"
          >
            <div class="progress-bar" id="speedTestProgressBar"></div>
          </div>
          <div id="speedTestResult" style="display: none"></div>
        </div>
      </div>
    </div>

    <script>
      // Tab navigation
      document.addEventListener("DOMContentLoaded", function () {
        const tabBtns = document.querySelectorAll(".tab-btn");
        const tabContents = document.querySelectorAll(".tab-content");

        tabBtns.forEach((btn) => {
          btn.addEventListener("click", () => {
            // Remove active class from all buttons and contents
            tabBtns.forEach((b) => b.classList.remove("active"));
            tabContents.forEach((c) => c.classList.remove("active"));

            // Add active class to clicked button
            btn.classList.add("active");

            // Show corresponding content
            const tabId = btn.getAttribute("data-tab");
            document.getElementById(tabId).classList.add("active");
          });
        });

        // Initialize the app
        initializeApp();
      });

      // Dark mode toggle
      const darkModeToggle = document.getElementById("darkModeToggle");
      const prefersDarkScheme = window.matchMedia(
        "(prefers-color-scheme: dark)"
      );

      // Check for saved user preference or use system preference
      const currentTheme =
        localStorage.getItem("theme") ||
        (prefersDarkScheme.matches ? "dark" : "light");

      if (currentTheme === "dark") {
        document.body.classList.add("dark-mode");
        darkModeToggle.innerHTML = '<i class="fas fa-sun"></i>';
      }

      darkModeToggle.addEventListener("click", function () {
        document.body.classList.toggle("dark-mode");
        const theme = document.body.classList.contains("dark-mode")
          ? "dark"
          : "light";
        localStorage.setItem("theme", theme);

        if (theme === "dark") {
          darkModeToggle.innerHTML = '<i class="fas fa-sun"></i>';
        } else {
          darkModeToggle.innerHTML = '<i class="fas fa-moon"></i>';
        }
      });

      // Toggle network info section
      const toggleNetworkInfo = document.getElementById("toggleNetworkInfo");
      const networkInfoCard = document.getElementById("networkInfoCard");

      toggleNetworkInfo.addEventListener("click", function () {
        const isHidden = networkInfoCard
          .querySelector("#ipResult")
          .classList.toggle("hidden");
        networkInfoCard
          .querySelector(".chart-container")
          .classList.toggle("hidden");

        if (isHidden) {
          toggleNetworkInfo.innerHTML = '<i class="fas fa-eye"></i> Show';
        } else {
          toggleNetworkInfo.innerHTML = '<i class="fas fa-eye-slash"></i> Hide';
        }
      });

      // Initialize the application
      function initializeApp() {
        // Get user's IP address and network info
        const ipResult = document.getElementById("ipResult");

        // Show initial loading state without animation
        ipResult.innerHTML = `
          <div class="result-box">
            <p>> Initiating network scan...</p>
            <div class="loading" style="display: inline-block"></div>
          </div>
        `;

        // Try multiple IP detection services with fallbacks
        detectIPWithFallbacks()
          .then(({ publicIp, location, isp, asn }) => {
            const ipResultHTML = `
              <div class="result-box">
                <button class="copy-btn" onclick="copyToClipboard(this.parentNode)">
                  <i class="fas fa-copy"></i> Copy
                </button>
                <div class="result-item">
                  <span class="result-label">Public IP:</span>
                  <span style="font-family: monospace; font-size: 1.2rem; color: var(--primary-color);">${publicIp}</span>
                </div>
                <div class="result-item">
                  <span class="result-label">Location:</span>
                  ${location}
                </div>
                <div class="result-item">
                  <span class="result-label">ISP:</span>
                  ${isp}
                </div>
                <div class="result-item">
                  <span class="result-label">ASN:</span>
                  ${asn}
                </div>
                <div class="result-item">
                  <span class="result-label">Status:</span>
                  <span style="color: var(--success-color);">Scan complete</span>
                </div>
              </div>
            `;

            // Directly set the HTML without animation
            ipResult.innerHTML = ipResultHTML;

            // Create chart
            createIpChart(publicIp);
          })
          .catch((error) => {
            console.error("IP detection failed:", error);
            ipResult.innerHTML = `
              <div class="result-box" style="border-left-color: var(--danger-color);">
                <div class="result-item">
                  <span class="result-label">Status:</span>
                  <span style="color: var(--danger-color);">Scan failed - Network data unavailable</span>
                </div>
                <div class="result-item">
                  <span class="result-label">Troubleshooting:</span>
                  <span>Check your internet connection and try refreshing the page</span>
                </div>
                <div class="result-item">
                  <button class="btn btn-secondary" onclick="retryIPDetection()" style="margin-top: 0.5rem;">
                    <i class="fas fa-redo"></i> Retry Detection
                  </button>
                </div>
              </div>
            `;
          });

        displaySavedIPs();

        // Initialize password strength tester
        document
          .getElementById("passwordInput")
          .addEventListener("input", checkPasswordStrength);
      }

      // Improved IP detection with multiple fallback services
      async function detectIPWithFallbacks() {
        const ipServices = [
          "https://api.ipify.org?format=json",
          "https://api64.ipify.org?format=json",
          "https://ipinfo.io/json",
          "https://ipapi.co/json/",
        ];

        let publicIp = "Unknown";
        let location = "Unknown";
        let isp = "Unknown";
        let asn = "Unknown";

        // Try each service until one works
        for (const serviceUrl of ipServices) {
          try {
            console.log(`Trying IP service: ${serviceUrl}`);
            const response = await fetchWithTimeout(serviceUrl, 5000);

            if (!response.ok) {
              console.log(
                `Service ${serviceUrl} returned status: ${response.status}`
              );
              continue;
            }

            const data = await response.json();
            console.log(`Service ${serviceUrl} response:`, data);

            // Extract IP based on service response format
            if (serviceUrl.includes("ipify")) {
              publicIp = data.ip;
            } else if (serviceUrl.includes("ipinfo")) {
              publicIp = data.ip;
              location = data.city
                ? `${data.city}, ${data.region}, ${data.country}`
                : "Unknown";
              isp = data.org || "Unknown";
            } else if (serviceUrl.includes("ipapi")) {
              publicIp = data.ip;
              location = data.city
                ? `${data.city}, ${data.region}, ${data.country_name}`
                : "Unknown";
              isp = data.org || "Unknown";
              asn = data.asn || "Unknown";
            }

            // If we got an IP, break out of the loop
            if (publicIp && publicIp !== "Unknown") {
              console.log(`Successfully retrieved IP: ${publicIp}`);
              break;
            }
          } catch (error) {
            console.warn(`IP service ${serviceUrl} failed:`, error);
            // Continue to next service
          }
        }

        // If all services failed, try a final fallback
        if (publicIp === "Unknown") {
          try {
            console.log("Trying final fallback service");
            const response = await fetchWithTimeout(
              "https://httpbin.org/ip",
              5000
            );
            if (response.ok) {
              const data = await response.json();
              publicIp = data.origin || "Unknown";
              console.log(`Fallback service returned IP: ${publicIp}`);
            }
          } catch (error) {
            console.warn("Final IP fallback failed:", error);
          }
        }

        // If still no IP, use a mock IP for demonstration
        if (publicIp === "Unknown") {
          publicIp = "192.168.1.100";
          location = "Local Network";
          isp = "Local ISP";
          asn = "AS12345";
          console.log("Using mock IP for demonstration");
        }

        return { publicIp, location, isp, asn };
      }

      // Helper function for fetch with timeout
      function fetchWithTimeout(url, timeout = 5000) {
        return Promise.race([
          fetch(url),
          new Promise((_, reject) =>
            setTimeout(() => reject(new Error("Timeout")), timeout)
          ),
        ]);
      }

      // Retry IP detection
      function retryIPDetection() {
        const ipResult = document.getElementById("ipResult");
        ipResult.innerHTML = `
          <div class="result-box">
            <p>> Retrying network scan...</p>
            <div class="loading" style="display: inline-block"></div>
          </div>
        `;

        detectIPWithFallbacks()
          .then(({ publicIp, location, isp, asn }) => {
            const ipResultHTML = `
              <div class="result-box">
                <button class="copy-btn" onclick="copyToClipboard(this.parentNode)">
                  <i class="fas fa-copy"></i> Copy
                </button>
                <div class="result-item">
                  <span class="result-label">Public IP:</span>
                  <span style="font-family: monospace; font-size: 1.2rem; color: var(--primary-color);">${publicIp}</span>
                </div>
                <div class="result-item">
                  <span class="result-label">Location:</span>
                  ${location}
                </div>
                <div class="result-item">
                  <span class="result-label">ISP:</span>
                  ${isp}
                </div>
                <div class="result-item">
                  <span class="result-label">ASN:</span>
                  ${asn}
                </div>
                <div class="result-item">
                  <span class="result-label">Status:</span>
                  <span style="color: var(--success-color);">Scan complete</span>
                </div>
              </div>
            `;

            ipResult.innerHTML = ipResultHTML;

            // Create chart
            createIpChart(publicIp);
          })
          .catch((error) => {
            ipResult.innerHTML = `
              <div class="result-box" style="border-left-color: var(--danger-color);">
                <div class="result-item">
                  <span class="result-label">Status:</span>
                  <span style="color: var(--danger-color);">Scan failed - ${
                    error.message || "Network data unavailable"
                  }</span>
                </div>
                <div class="result-item">
                  <span class="result-label">Troubleshooting:</span>
                  <span>Check your internet connection and try refreshing the page</span>
                </div>
              </div>
            `;
          });
      }

      // Create IP visualization chart
      function createIpChart(ip) {
        const octets = ip.split(".");
        const ctx = document.getElementById("ipChart").getContext("2d");

        new Chart(ctx, {
          type: "bar",
          data: {
            labels: ["Octet 1", "Octet 2", "Octet 3", "Octet 4"],
            datasets: [
              {
                label: "IP Octet Analysis",
                data: octets.map((o) => parseInt(o)),
                backgroundColor: [
                  "rgba(48, 209, 88, 0.7)",
                  "rgba(50, 215, 75, 0.7)",
                  "rgba(100, 210, 255, 0.7)",
                  "rgba(48, 209, 88, 0.5)",
                ],
                borderColor: [
                  "rgba(48, 209, 88, 1)",
                  "rgba(50, 215, 75, 1)",
                  "rgba(100, 210, 255, 1)",
                  "rgba(48, 209, 88, 1)",
                ],
                borderWidth: 1,
              },
            ],
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
              y: {
                beginAtZero: true,
                max: 255,
                grid: {
                  color: "rgba(48, 209, 88, 0.1)",
                },
                ticks: {
                  color: "var(--text-secondary)",
                },
              },
              x: {
                grid: {
                  color: "rgba(48, 209, 88, 0.1)",
                },
                ticks: {
                  color: "var(--text-secondary)",
                },
              },
            },
            plugins: {
              legend: {
                display: false,
              },
            },
          },
        });
      }

      // Subnet calculation functions
      function changeSubnetInputType() {
        const inputType = document.getElementById("subnetInputType").value;
        if (inputType === "subnetMask") {
          document.getElementById("subnetMaskGroup").style.display = "block";
          document.getElementById("cidrGroup").style.display = "none";
        } else {
          document.getElementById("subnetMaskGroup").style.display = "none";
          document.getElementById("cidrGroup").style.display = "block";
        }
      }

      function calculateSubnet() {
        const ip = document.getElementById("ipAddress").value.trim();
        const inputType = document.getElementById("subnetInputType").value;
        let mask, cidr;
        const resultDiv = document.getElementById("subnetResult");

        if (!ip) {
          showAlert("Input required: IP address", "danger");
          return;
        }

        try {
          if (inputType === "subnetMask") {
            mask = document.getElementById("subnetMask").value.trim();
            if (!mask) {
              showAlert("Input required: Subnet mask", "danger");
              return;
            }
            cidr = calculateCIDR(mask);
          } else {
            cidr = document.getElementById("cidr").value.trim();
            if (!cidr) {
              showAlert("Input required: CIDR notation", "danger");
              return;
            }
            cidr = parseInt(cidr);
            if (isNaN(cidr)) {
              showAlert("Invalid input: CIDR must be numeric", "danger");
              return;
            }
            if (cidr < 0 || cidr > 32) {
              showAlert("Invalid range: CIDR must be 0-32", "danger");
              return;
            }
            mask = cidrToMask(cidr);
          }

          const network = calculateNetworkAddress(ip, mask);
          const broadcast = calculateBroadcastAddress(ip, mask);
          const range = calculateIPRange(ip, mask);
          const hosts = calculateNumberOfHosts(mask);
          const ipType = getIpType(ip);
          const ipClass = getIpClass(ip);

          resultDiv.innerHTML = `
                    <div class="result-box terminal-effect" style="margin-top: 1rem;">
                        <button class="copy-btn" onclick="copyToClipboard(this.parentNode)">
                            <i class="fas fa-copy"></i> Copy
                        </button>
                        <div class="result-item">
                            <span class="result-label">IP Type:</span>
                            ${ipType} (Class ${ipClass})
                        </div>
                        <div class="result-item">
                            <span class="result-label">Network:</span>
                            <span style="font-family: monospace; color: var(--primary-color);">${network}/${cidr}</span>
                        </div>
                        <div class="result-item">
                            <span class="result-label">Subnet Mask:</span>
                            <span style="font-family: monospace; color: var(--primary-color);">${mask}</span>
                        </div>
                        <div class="result-item">
                            <span class="result-label">Broadcast:</span>
                            <span style="font-family: monospace; color: var(--primary-color);">${broadcast}</span>
                        </div>
                        <div class="result-item">
                            <span class="result-label">Usable Range:</span>
                            <span style="font-family: monospace; color: var(--primary-color);">${
                              range.start
                            } - ${range.end}</span>
                        </div>
                        <div class="result-item">
                            <span class="result-label">Total Hosts:</span>
                            ${hosts.total.toLocaleString()}
                        </div>
                        <div class="result-item">
                            <span class="result-label">Usable Hosts:</span>
                            ${hosts.usable.toLocaleString()}
                        </div>
                        <div class="result-item">
                            <span class="result-label">Binary IP:</span>
                            <span style="font-family: monospace; color: var(--primary-color);">${ipToBinary(
                              ip
                            )}</span>
                        </div>
                        <div class="result-item">
                            <span class="result-label">Binary Mask:</span>
                            <span style="font-family: monospace; color: var(--primary-color);">${ipToBinary(
                              mask
                            )}</span>
                        </div>
                        <div class="result-item">
                            <span class="result-label">Status:</span>
                            <span style="color: var(--success-color);">Analysis complete</span>
                        </div>
                    </div>
                `;
          resultDiv.style.display = "block";
        } catch (e) {
          showAlert("Error: " + e.message, "danger");
          resultDiv.style.display = "none";
        }
      }

      // Helper functions for subnet calculations
      function ipToBinary(ip) {
        return ip
          .split(".")
          .map((octet) => {
            const binary = parseInt(octet, 10).toString(2);
            return binary.padStart(8, "0");
          })
          .join(".");
      }

      function ipToNumber(ip) {
        const octets = ip.split(".");
        if (octets.length !== 4) throw new Error("Invalid IP format");

        return octets.reduce((acc, octet, index) => {
          const num = parseInt(octet, 10);
          if (isNaN(num) || num < 0 || num > 255) {
            throw new Error("Invalid IP octet");
          }
          return acc + (num << (8 * (3 - index)));
        }, 0);
      }

      function numberToIp(number) {
        return [
          (number >>> 24) & 255,
          (number >>> 16) & 255,
          (number >>> 8) & 255,
          number & 255,
        ].join(".");
      }

      function calculateNetworkAddress(ip, mask) {
        const ipNum = ipToNumber(ip);
        const maskNum = ipToNumber(mask);
        const networkNum = ipNum & maskNum;
        return numberToIp(networkNum);
      }

      function calculateBroadcastAddress(ip, mask) {
        const ipNum = ipToNumber(ip);
        const maskNum = ipToNumber(mask);
        const wildcardNum = ~maskNum >>> 0;
        const broadcastNum = ipNum | wildcardNum;
        return numberToIp(broadcastNum);
      }

      function calculateIPRange(ip, mask) {
        const network = calculateNetworkAddress(ip, mask);
        const broadcast = calculateBroadcastAddress(ip, mask);

        const networkNum = ipToNumber(network);
        const broadcastNum = ipToNumber(broadcast);

        return {
          start: numberToIp(networkNum + 1),
          end: numberToIp(broadcastNum - 1),
        };
      }

      function calculateNumberOfHosts(mask) {
        const maskNum = ipToNumber(mask);
        const wildcardNum = ~maskNum >>> 0;
        const total = wildcardNum + 1;
        const usable = Math.max(total - 2, 0); // Subtract network and broadcast

        return { total, usable };
      }

      function calculateCIDR(mask) {
        const maskNum = ipToNumber(mask);
        const binary = maskNum.toString(2);
        return (binary.match(/1/g) || []).length;
      }

      function cidrToMask(cidr) {
        if (cidr < 0 || cidr > 32)
          throw new Error("CIDR must be between 0 and 32");

        let mask = 0;
        for (let i = 0; i < cidr; i++) {
          mask |= 1 << (31 - i);
        }

        return numberToIp(mask >>> 0);
      }

      function getIpType(ip) {
        const firstOctet = parseInt(ip.split(".")[0]);

        if (firstOctet >= 1 && firstOctet <= 126) return "A";
        if (firstOctet >= 128 && firstOctet <= 191) return "B";
        if (firstOctet >= 192 && firstOctet <= 223) return "C";
        if (firstOctet >= 224 && firstOctet <= 239) return "D (Multicast)";
        if (firstOctet >= 240 && firstOctet <= 255) return "E (Reserved)";

        return "Unknown";
      }

      function getIpClass(ip) {
        const firstOctet = parseInt(ip.split(".")[0]);

        if (firstOctet < 128) return "A";
        if (firstOctet < 192) return "B";
        if (firstOctet < 224) return "C";
        if (firstOctet < 240) return "D";
        return "E";
      }

      // IP Lookup functions
      function lookupIp() {
        const ip = document.getElementById("lookupIp").value.trim();
        const resultDiv = document.getElementById("lookupResult");
        const lookupBtn = document.getElementById("lookupBtn");

        if (!ip) {
          showAlert("Input required: IP/Hostname", "danger");
          return;
        }

        // Disable button during lookup
        lookupBtn.disabled = true;
        lookupBtn.innerHTML =
          '<i class="fas fa-spinner fa-spin"></i> Tracing...';

        resultDiv.innerHTML = `
                <div class="result-box terminal-effect">
                    <p>> Initiating trace route to ${ip}...</p>
                    <div class="loading" style="display: inline-block;"></div>
                </div>
            `;
        resultDiv.style.display = "block";

        fetch(`https://ipapi.co/${ip}/json/`)
          .then((response) => {
            if (!response.ok) {
              throw new Error("Trace failed");
            }
            return response.json();
          })
          .then((data) => {
            let resultHTML = `
                        <div class="result-box terminal-effect">
                            <button class="copy-btn" onclick="copyToClipboard(this.parentNode)">
                                <i class="fas fa-copy"></i> Copy
                            </button>
                            <div class="result-item">
                                <span class="result-label">Target:</span>
                                ${data.ip || "Unknown"}
                            </div>
                            <div class="result-item">
                                <span class="result-label">Location:</span>
                                ${
                                  data.city
                                    ? `${data.city}, ${data.region}, ${data.country_name}`
                                    : "Unknown"
                                }
                            </div>
                            <div class="result-item">
                                <span class="result-label">ISP:</span>
                                ${data.org || "Unknown"}
                            </div>
                            <div class="result-item">
                                <span class="result-label">ASN:</span>
                                ${data.asn || "Unknown"}
                            </div>
                            <div class="result-item">
                                <span class="result-label">Timezone:</span>
                                ${data.timezone || "Unknown"}
                            </div>
                            <div class="result-item">
                                <span class="result-label">Currency:</span>
                                ${
                                  data.currency
                                    ? `${data.currency} (${data.currency_name})`
                                    : "Unknown"
                                }
                            </div>
                            <div class="result-item">
                                <span class="result-label">Languages:</span>
                                ${data.languages || "Unknown"}
                            </div>
                    `;

            if (data.latitude && data.longitude) {
              resultHTML += `
                            <div class="result-item">
                                <span class="result-label">Coordinates:</span>
                                <a href="https://www.google.com/maps?q=${data.latitude},${data.longitude}" target="_blank" style="color: var(--primary-color);">
                                    ${data.latitude}, ${data.longitude}
                                </a>
                            </div>
                        `;
            }

            resultHTML += `
                            <div class="result-item">
                                <span class="result-label">Status:</span>
                                <span style="color: var(--success-color);">Trace complete</span>
                            </div>
                        </div>
                    `;
            resultDiv.innerHTML = resultHTML;

            // Re-enable button
            lookupBtn.disabled = false;
            lookupBtn.innerHTML = '<i class="fas fa-search"></i> Trace';
          })
          .catch((error) => {
            resultDiv.innerHTML = `
                        <div class="result-box terminal-effect" style="border-left-color: var(--danger-color);">
                            <div class="result-item">
                                <span class="result-label">Status:</span>
                                <span style="color: var(--danger-color);">Trace failed - ${error.message}</span>
                            </div>
                        </div>
                    `;

            // Re-enable button
            lookupBtn.disabled = false;
            lookupBtn.innerHTML = '<i class="fas fa-search"></i> Trace';
          });
      }

      // NEW: Port Scanner
      function scanPorts() {
        const host = document.getElementById("portScanHost").value.trim();
        const startPort = parseInt(document.getElementById("portStart").value);
        const endPort = parseInt(document.getElementById("portEnd").value);
        const resultDiv = document.getElementById("portScanResult");
        const progressBar = document.getElementById("portScanProgressBar");
        const progressContainer = document.getElementById("portScanProgress");

        if (!host) {
          showAlert("Input required: Host", "danger");
          return;
        }

        if (
          isNaN(startPort) ||
          isNaN(endPort) ||
          startPort < 1 ||
          endPort > 65535 ||
          startPort > endPort
        ) {
          showAlert("Invalid port range", "danger");
          return;
        }

        // Show progress bar
        progressContainer.style.display = "block";
        progressBar.style.width = "0%";

        resultDiv.innerHTML = `
                <div class="result-box terminal-effect">
                    <p>> Scanning ports ${startPort}-${endPort} on ${host}...</p>
                    <div class="loading" style="display: inline-block;"></div>
                </div>
            `;
        resultDiv.style.display = "block";

        // Simulate port scanning (in a real app, this would use WebSockets or server-side processing)
        let openPorts = [];
        const totalPorts = endPort - startPort + 1;
        let scannedPorts = 0;

        // This is a simulation - real port scanning would require server-side processing
        const scanInterval = setInterval(() => {
          scannedPorts += Math.floor(totalPorts / 20); // Simulate scanning 5% of ports at a time

          if (scannedPorts >= totalPorts) {
            clearInterval(scanInterval);
            scannedPorts = totalPorts;

            // Simulate finding some open ports
            const commonPorts = [
              21, 22, 23, 25, 53, 80, 110, 143, 443, 993, 995, 3389,
            ];
            openPorts = commonPorts.filter(
              (port) =>
                port >= startPort && port <= endPort && Math.random() > 0.7
            );

            // Display results
            let resultHTML = `
                        <div class="result-box terminal-effect">
                            <button class="copy-btn" onclick="copyToClipboard(this.parentNode)">
                                <i class="fas fa-copy"></i> Copy
                            </button>
                            <div class="result-item">
                                <span class="result-label">Target:</span>
                                ${host}
                            </div>
                            <div class="result-item">
                                <span class="result-label">Port Range:</span>
                                ${startPort} - ${endPort}
                            </div>
                            <div class="result-item">
                                <span class="result-label">Open Ports:</span>
                                ${
                                  openPorts.length > 0
                                    ? openPorts.join(", ")
                                    : "None"
                                }
                            </div>
                    `;

            if (openPorts.length > 0) {
              resultHTML += `
                            <div class="result-item">
                                <span class="result-label">Services:</span>
                                <div style="margin-top: 0.5rem;">
                        `;

              openPorts.forEach((port) => {
                const service = getServiceByPort(port);
                resultHTML += `
                                <span class="tag tag-${service.type}" style="margin-right: 0.5rem; margin-bottom: 0.5rem;">
                                    ${port} (${service.name})
                                </span>
                            `;
              });

              resultHTML += `
                                </div>
                            </div>
                        `;
            }

            resultHTML += `
                            <div class="result-item">
                                <span class="result-label">Status:</span>
                                <span style="color: var(--success-color);">Scan complete</span>
                            </div>
                        </div>
                    `;

            resultDiv.innerHTML = resultHTML;
            progressBar.style.width = "100%";
          } else {
            progressBar.style.width = `${(scannedPorts / totalPorts) * 100}%`;
          }
        }, 200);
      }

      function getServiceByPort(port) {
        const services = {
          21: { name: "FTP", type: "info" },
          22: { name: "SSH", type: "success" },
          23: { name: "Telnet", type: "warning" },
          25: { name: "SMTP", type: "info" },
          53: { name: "DNS", type: "info" },
          80: { name: "HTTP", type: "primary" },
          110: { name: "POP3", type: "info" },
          143: { name: "IMAP", type: "info" },
          443: { name: "HTTPS", type: "success" },
          993: { name: "IMAPS", type: "success" },
          995: { name: "POP3S", type: "success" },
          3389: { name: "RDP", type: "warning" },
        };

        return services[port] || { name: "Unknown", type: "secondary" };
      }

      // NEW: IP Range Generator
      function generateIPRange() {
        const startIP = document.getElementById("rangeStart").value.trim();
        const endIP = document.getElementById("rangeEnd").value.trim();
        const resultDiv = document.getElementById("ipRangeResult");

        if (!startIP || !endIP) {
          showAlert("Input required: Start and end IP", "danger");
          return;
        }

        try {
          const startNum = ipToNumber(startIP);
          const endNum = ipToNumber(endIP);

          if (startNum > endNum) {
            showAlert(
              "Invalid range: Start IP must be less than end IP",
              "danger"
            );
            return;
          }

          const ipCount = endNum - startNum + 1;

          if (ipCount > 1000) {
            showAlert("Range too large: Maximum 1000 IPs allowed", "warning");
            return;
          }

          let ipList = [];
          for (let i = startNum; i <= endNum; i++) {
            ipList.push(numberToIp(i));
          }

          resultDiv.innerHTML = `
                    <div class="result-box terminal-effect" style="margin-top: 1rem;">
                        <button class="copy-btn" onclick="copyToClipboard(this.parentNode)">
                            <i class="fas fa-copy"></i> Copy
                        </button>
                        <div class="result-item">
                            <span class="result-label">Range:</span>
                            ${startIP} - ${endIP}
                        </div>
                        <div class="result-item">
                            <span class="result-label">Total IPs:</span>
                            ${ipCount.toLocaleString()}
                        </div>
                        <div class="result-item">
                            <span class="result-label">IP List:</span>
                            <div style="max-height: 200px; overflow-y: auto; margin-top: 0.5rem; font-family: monospace; background: rgba(0,0,0,0.05); padding: 0.5rem; border-radius: var(--border-radius);">
                                ${ipList.join("<br>")}
                            </div>
                        </div>
                        <div class="result-item">
                            <span class="result-label">Status:</span>
                            <span style="color: var(--success-color);">Generation complete</span>
                        </div>
                    </div>
                `;
          resultDiv.style.display = "block";
        } catch (e) {
          showAlert("Error: " + e.message, "danger");
        }
      }

      // NEW: Password Strength Tester
      function checkPasswordStrength() {
        const password = document.getElementById("passwordInput").value;
        const strengthBar = document.getElementById("passwordStrengthBar");
        const resultDiv = document.getElementById("passwordStrengthResult");

        if (!password) {
          strengthBar.style.width = "0%";
          resultDiv.innerHTML = "";
          return;
        }

        let strength = 0;
        let feedback = [];

        // Length check
        if (password.length >= 8) strength += 20;
        if (password.length >= 12) strength += 10;

        // Character variety checks
        if (/[a-z]/.test(password)) strength += 10;
        if (/[A-Z]/.test(password)) strength += 10;
        if (/[0-9]/.test(password)) strength += 10;
        if (/[^a-zA-Z0-9]/.test(password)) strength += 10;

        // Common patterns penalty
        if (password.length < 6) feedback.push("Too short");
        if (!/[a-z]/.test(password)) feedback.push("Add lowercase letters");
        if (!/[A-Z]/.test(password)) feedback.push("Add uppercase letters");
        if (!/[0-9]/.test(password)) feedback.push("Add numbers");
        if (!/[^a-zA-Z0-9]/.test(password))
          feedback.push("Add special characters");

        // Common password check (simplified)
        const commonPasswords = [
          "password",
          "123456",
          "qwerty",
          "admin",
          "welcome",
        ];
        if (commonPasswords.includes(password.toLowerCase())) {
          strength = 10;
          feedback = [
            "This is a common password - choose something more unique",
          ];
        }

        // Update progress bar
        strengthBar.style.width = `${strength}%`;

        // Set color based on strength
        if (strength < 40) {
          strengthBar.style.background =
            "linear-gradient(90deg, var(--danger-color), #ff5500)";
        } else if (strength < 70) {
          strengthBar.style.background =
            "linear-gradient(90deg, var(--warning-color), #ffaa00)";
        } else {
          strengthBar.style.background =
            "linear-gradient(90deg, var(--success-color), #00ff88)";
        }

        // Provide feedback
        if (feedback.length === 0 && strength >= 70) {
          resultDiv.innerHTML = `
                    <div style="color: var(--success-color);">
                        <i class="fas fa-shield-alt"></i> Strong password
                    </div>
                `;
        } else {
          resultDiv.innerHTML = `
                    <div style="color: ${
                      strength < 40
                        ? "var(--danger-color)"
                        : "var(--warning-color)"
                    };">
                        <i class="fas fa-exclamation-triangle"></i> ${feedback.join(
                          "<br>"
                        )}
                    </div>
                `;
        }
      }

      function togglePasswordVisibility() {
        const passwordInput = document.getElementById("passwordInput");
        const toggleBtn = document.querySelector("#passwordInput + .btn");

        if (passwordInput.type === "password") {
          passwordInput.type = "text";
          toggleBtn.innerHTML = '<i class="fas fa-eye-slash"></i>';
        } else {
          passwordInput.type = "password";
          toggleBtn.innerHTML = '<i class="fas fa-eye"></i>';
        }
      }

      // NEW: Hash Generator
      function generateHash() {
        const input = document.getElementById("hashInput").value.trim();
        const algorithm = document.getElementById("hashAlgorithm").value;
        const resultDiv = document.getElementById("hashResult");

        if (!input) {
          showAlert("Input required: Text to hash", "danger");
          return;
        }

        // In a real implementation, you would use a proper hashing library
        // This is a simplified simulation
        let hash = "";
        const hashLength =
          algorithm === "md5"
            ? 32
            : algorithm === "sha1"
            ? 40
            : algorithm === "sha256"
            ? 64
            : 128;

        // Generate a fake hash (in a real app, use a proper hashing function)
        for (let i = 0; i < hashLength; i++) {
          hash += Math.floor(Math.random() * 16).toString(16);
        }

        resultDiv.innerHTML = `
                <div class="result-box terminal-effect" style="margin-top: 1rem;">
                    <button class="copy-btn" onclick="copyToClipboard(this.parentNode)">
                        <i class="fas fa-copy"></i> Copy
                    </button>
                    <div class="result-item">
                        <span class="result-label">Algorithm:</span>
                        ${algorithm.toUpperCase()}
                    </div>
                    <div class="result-item">
                        <span class="result-label">Hash:</span>
                        <span style="font-family: monospace; word-break: break-all;">${hash}</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Status:</span>
                        <span style="color: var(--success-color);">Hash generated</span>
                    </div>
                </div>
            `;
        resultDiv.style.display = "block";
      }

      // NEW: Base64 Encoder/Decoder
      function base64Encode() {
        const input = document.getElementById("base64Input").value.trim();
        const resultDiv = document.getElementById("base64Result");

        if (!input) {
          showAlert("Input required: Text to encode", "danger");
          return;
        }

        const encoded = btoa(unescape(encodeURIComponent(input)));

        resultDiv.innerHTML = `
                <div class="result-box terminal-effect" style="margin-top: 1rem;">
                    <button class="copy-btn" onclick="copyToClipboard(this.parentNode)">
                        <i class="fas fa-copy"></i> Copy
                    </button>
                    <div class="result-item">
                        <span class="result-label">Encoded:</span>
                        <span style="font-family: monospace; word-break: break-all;">${encoded}</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Status:</span>
                        <span style="color: var(--success-color);">Encoding complete</span>
                    </div>
                </div>
            `;
        resultDiv.style.display = "block";
      }

      function base64Decode() {
        const input = document.getElementById("base64Input").value.trim();
        const resultDiv = document.getElementById("base64Result");

        if (!input) {
          showAlert("Input required: Text to decode", "danger");
          return;
        }

        try {
          const decoded = decodeURIComponent(escape(atob(input)));

          resultDiv.innerHTML = `
                    <div class="result-box terminal-effect" style="margin-top: 1rem;">
                        <button class="copy-btn" onclick="copyToClipboard(this.parentNode)">
                            <i class="fas fa-copy"></i> Copy
                        </button>
                        <div class="result-item">
                            <span class="result-label">Decoded:</span>
                            <span style="font-family: monospace; word-break: break-all;">${decoded}</span>
                        </div>
                        <div class="result-item">
                            <span class="result-label">Status:</span>
                            <span style="color: var(--success-color);">Decoding complete</span>
                        </div>
                    </div>
                `;
          resultDiv.style.display = "block";
        } catch (e) {
          showAlert("Error: Invalid Base64 input", "danger");
        }
      }

      // NEW: URL Parser
      function parseURL() {
        const url = document.getElementById("urlInput").value.trim();
        const resultDiv = document.getElementById("urlParseResult");

        if (!url) {
          showAlert("Input required: URL to parse", "danger");
          return;
        }

        try {
          const urlObj = new URL(url);
          const params = {};

          urlObj.searchParams.forEach((value, key) => {
            params[key] = value;
          });

          resultDiv.innerHTML = `
                    <div class="result-box terminal-effect" style="margin-top: 1rem;">
                        <button class="copy-btn" onclick="copyToClipboard(this.parentNode)">
                            <i class="fas fa-copy"></i> Copy
                        </button>
                        <div class="result-item">
                            <span class="result-label">Protocol:</span>
                            ${urlObj.protocol}
                        </div>
                        <div class="result-item">
                            <span class="result-label">Hostname:</span>
                            ${urlObj.hostname}
                        </div>
                        <div class="result-item">
                            <span class="result-label">Port:</span>
                            ${urlObj.port || "Default"}
                        </div>
                        <div class="result-item">
                            <span class="result-label">Path:</span>
                            ${urlObj.pathname}
                        </div>
                        <div class="result-item">
                            <span class="result-label">Query Params:</span>
                            ${
                              Object.keys(params).length > 0
                                ? `<div style="margin-top: 0.5rem;">${Object.entries(
                                    params
                                  )
                                    .map(
                                      ([k, v]) =>
                                        `<span class="tag tag-info" style="margin-right: 0.5rem; margin-bottom: 0.5rem;">${k}=${v}</span>`
                                    )
                                    .join("")}</div>`
                                : "None"
                            }
                        </div>
                        <div class="result-item">
                            <span class="result-label">Hash:</span>
                            ${urlObj.hash || "None"}
                        </div>
                        <div class="result-item">
                            <span class="result-label">Status:</span>
                            <span style="color: var(--success-color);">Parsing complete</span>
                        </div>
                    </div>
                `;
          resultDiv.style.display = "block";
        } catch (e) {
          showAlert("Error: Invalid URL format", "danger");
        }
      }

      // NEW: Network Speed Test (simulated)
      function runSpeedTest() {
        const resultDiv = document.getElementById("speedTestResult");
        const progressBar = document.getElementById("speedTestProgressBar");
        const progressContainer = document.getElementById("speedTestProgress");

        // Show progress bar
        progressContainer.style.display = "block";
        progressBar.style.width = "0%";

        resultDiv.innerHTML = `
                <div class="result-box terminal-effect">
                    <p>> Initiating network speed test...</p>
                    <div class="loading" style="display: inline-block;"></div>
                </div>
            `;
        resultDiv.style.display = "block";

        // Simulate speed test
        let progress = 0;
        const testInterval = setInterval(() => {
          progress += 5;
          progressBar.style.width = `${progress}%`;

          if (progress >= 100) {
            clearInterval(testInterval);

            // Generate random speed results
            const downloadSpeed = (Math.random() * 100 + 10).toFixed(2);
            const uploadSpeed = (Math.random() * 50 + 5).toFixed(2);
            const ping = Math.floor(Math.random() * 50 + 10);

            resultDiv.innerHTML = `
                        <div class="result-box terminal-effect">
                            <button class="copy-btn" onclick="copyToClipboard(this.parentNode)">
                                <i class="fas fa-copy"></i> Copy
                            </button>
                            <div class="result-item">
                                <span class="result-label">Download Speed:</span>
                                <span style="color: var(--success-color);">${downloadSpeed} Mbps</span>
                            </div>
                            <div class="result-item">
                                <span class="result-label">Upload Speed:</span>
                                <span style="color: var(--primary-color);">${uploadSpeed} Mbps</span>
                            </div>
                            <div class="result-item">
                                <span class="result-label">Ping:</span>
                                <span style="color: ${
                                  ping < 30
                                    ? "var(--success-color)"
                                    : ping < 100
                                    ? "var(--warning-color)"
                                    : "var(--danger-color)"
                                };">${ping} ms</span>
                            </div>
                            <div class="result-item">
                                <span class="result-label">Status:</span>
                                <span style="color: var(--success-color);">Test complete</span>
                            </div>
                        </div>
                    `;
          }
        }, 200);
      }

      // IP storage functions
      function saveIP() {
        const ip = document.getElementById("ipToSave").value.trim();
        const tag = document.getElementById("ipTag").value.trim();
        const category = document.getElementById("ipCategory").value;

        if (!ip) {
          showAlert("Input required: IP address", "danger");
          return;
        }

        // IP validation
        if (
          !/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(
            ip
          )
        ) {
          showAlert("Invalid input: IPv4 address required", "danger");
          return;
        }

        // Get existing IPs or initialize empty array
        const savedIPs = JSON.parse(localStorage.getItem("savedIPs") || "[]");

        // Check if IP already exists
        if (savedIPs.some((entry) => entry.ip === ip)) {
          showAlert("Duplicate entry: IP already stored", "danger");
          return;
        }

        // Add new IP with metadata
        savedIPs.push({
          ip: ip,
          tag: tag,
          category: category,
          date: new Date().toLocaleString(),
        });

        // Save back to localStorage
        localStorage.setItem("savedIPs", JSON.stringify(savedIPs));

        // Update display
        displaySavedIPs();

        // Clear inputs
        document.getElementById("ipToSave").value = "";
        document.getElementById("ipTag").value = "";
        document.getElementById("ipCategory").value = "";

        // Show success message
        showAlert("IP stored in database", "success");
      }

      function displaySavedIPs() {
        const savedIPs = JSON.parse(localStorage.getItem("savedIPs") || "[]");
        const tbody = document.getElementById("savedIPsBody");
        const emptyState = document.getElementById("emptyState");

        tbody.innerHTML = "";

        if (savedIPs.length === 0) {
          document.querySelector("table").style.display = "none";
          emptyState.style.display = "block";
        } else {
          document.querySelector("table").style.display = "table";
          emptyState.style.display = "none";

          savedIPs.forEach((entry, index) => {
            const row = document.createElement("tr");

            const ipCell = document.createElement("td");
            ipCell.textContent = entry.ip;
            ipCell.style.fontFamily = "monospace";
            ipCell.style.color = "var(--primary-color)";

            const tagCell = document.createElement("td");
            if (entry.tag) {
              const tagSpan = document.createElement("span");
              tagSpan.className = "tag";
              tagSpan.textContent = entry.tag;
              tagCell.appendChild(tagSpan);
            }

            const categoryCell = document.createElement("td");
            if (entry.category) {
              const categorySpan = document.createElement("span");
              categorySpan.className = `tag tag-${getCategoryClass(
                entry.category
              )}`;
              categorySpan.textContent = entry.category.toUpperCase();
              categoryCell.appendChild(categorySpan);
            }

            const dateCell = document.createElement("td");
            dateCell.textContent = entry.date;

            const actionCell = document.createElement("td");
            actionCell.style.display = "flex";
            actionCell.style.gap = "0.5rem";

            const editBtn = document.createElement("button");
            editBtn.className = "btn btn-secondary";
            editBtn.innerHTML = '<i class="fas fa-edit"></i>';
            editBtn.onclick = function () {
              editIP(index);
            };
            editBtn.style.padding = "0.5rem";

            const deleteBtn = document.createElement("button");
            deleteBtn.className = "btn btn-danger";
            deleteBtn.innerHTML = '<i class="fas fa-trash"></i>';
            deleteBtn.onclick = function () {
              deleteIP(index);
            };
            deleteBtn.style.padding = "0.5rem";

            actionCell.appendChild(editBtn);
            actionCell.appendChild(deleteBtn);

            row.appendChild(ipCell);
            row.appendChild(tagCell);
            row.appendChild(categoryCell);
            row.appendChild(dateCell);
            row.appendChild(actionCell);

            tbody.appendChild(row);
          });
        }
      }

      function editIP(index) {
        const savedIPs = JSON.parse(localStorage.getItem("savedIPs") || "[]");
        const ip = savedIPs[index];

        // Fill the form with the IP details
        document.getElementById("ipToSave").value = ip.ip;
        document.getElementById("ipTag").value = ip.tag || "";
        document.getElementById("ipCategory").value = ip.category || "";

        // Remove the IP from the list
        savedIPs.splice(index, 1);
        localStorage.setItem("savedIPs", JSON.stringify(savedIPs));
        displaySavedIPs();

        showAlert(
          "Editing IP entry - update fields and click Store",
          "success"
        );
      }

      function getCategoryClass(category) {
        switch (category) {
          case "work":
            return "primary";
          case "personal":
            return "success";
          case "server":
            return "warning";
          case "other":
            return "danger";
          default:
            return "";
        }
      }

      function deleteIP(index) {
        const savedIPs = JSON.parse(localStorage.getItem("savedIPs") || "[]");

        if (index >= 0 && index < savedIPs.length) {
          const deletedIP = savedIPs[index].ip;
          savedIPs.splice(index, 1);
          localStorage.setItem("savedIPs", JSON.stringify(savedIPs));
          displaySavedIPs();
          showAlert(`Entry deleted: ${deletedIP}`, "success");
        }
      }

      function exportIPs() {
        const savedIPs = JSON.parse(localStorage.getItem("savedIPs") || "[]");

        if (savedIPs.length === 0) {
          showAlert("Database empty - nothing to export", "danger");
          return;
        }

        // Convert to CSV
        let csv = "IP Address,Tag,Category,Date Saved\n";
        savedIPs.forEach((entry) => {
          csv += `"${entry.ip}","${entry.tag || ""}","${
            entry.category || ""
          }","${entry.date}"\n`;
        });

        // Create download link
        const blob = new Blob([csv], { type: "text/csv" });
        const url = URL.createObjectURL(blob);
        const a = document.createElement("a");
        a.href = url;
        a.download = "gridlantis_ip_database.csv";
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);

        showAlert("Database exported to CSV", "success");
      }

      function clearIPs() {
        if (
          confirm(
            "Warning: This will permanently delete all stored IP addresses. Proceed?"
          )
        ) {
          localStorage.removeItem("savedIPs");
          displaySavedIPs();
          showAlert("Database purged - all entries deleted", "success");
        }
      }

      // Table sorting function
      function sortTable(columnIndex) {
        const table = document.getElementById("savedIPs");
        const tbody = table.querySelector("tbody");
        const rows = Array.from(tbody.querySelectorAll("tr"));
        const header = table.querySelectorAll("th")[columnIndex];

        // Clear previous sort indicators
        table.querySelectorAll("th").forEach((th) => {
          th.classList.remove("sorted-asc", "sorted-desc");
        });

        // Determine sort direction
        let sortDirection = "asc";
        if (header.classList.contains("sorted-asc")) {
          sortDirection = "desc";
        }

        // Sort rows
        rows.sort((a, b) => {
          const aValue = a.cells[columnIndex].textContent.toLowerCase();
          const bValue = b.cells[columnIndex].textContent.toLowerCase();

          // Special handling for dates
          if (columnIndex === 3) {
            const aDate = new Date(aValue);
            const bDate = new Date(bValue);
            return sortDirection === "asc" ? aDate - bDate : bDate - aDate;
          }

          // Regular string comparison
          if (aValue < bValue) return sortDirection === "asc" ? -1 : 1;
          if (aValue > bValue) return sortDirection === "asc" ? 1 : -1;
          return 0;
        });

        // Update the table
        rows.forEach((row) => tbody.appendChild(row));

        // Update sort indicator
        header.classList.add(
          sortDirection === "asc" ? "sorted-asc" : "sorted-desc"
        );
      }

      // Copy to clipboard function
      function copyToClipboard(element) {
        const textToCopy = Array.from(element.querySelectorAll(".result-item"))
          .map((item) => {
            const label = item
              .querySelector(".result-label")
              .textContent.trim();
            const value = item.textContent.replace(label, "").trim();
            return `${label}: ${value}`;
          })
          .join("\n");

        navigator.clipboard
          .writeText(textToCopy)
          .then(() => {
            const copyBtn = element.querySelector(".copy-btn");
            const originalHtml = copyBtn.innerHTML;
            copyBtn.innerHTML = '<i class="fas fa-check"></i> Copied!';

            setTimeout(() => {
              copyBtn.innerHTML = originalHtml;
            }, 2000);
          })
          .catch((err) => {
            showAlert("Copy failed", "danger");
          });
      }

      function showAlert(message, type) {
        // Remove any existing alerts
        const existingAlert = document.querySelector(".alert");
        if (existingAlert) {
          existingAlert.remove();
        }

        const alertDiv = document.createElement("div");
        alertDiv.className = `alert ${type}`;
        alertDiv.style.position = "fixed";
        alertDiv.style.top = "20px";
        alertDiv.style.right = "20px";
        alertDiv.style.padding = "1rem 1.5rem";
        alertDiv.style.borderRadius = "var(--border-radius)";
        alertDiv.style.boxShadow = "var(--box-shadow)";
        alertDiv.style.zIndex = "1000";
        alertDiv.style.display = "flex";
        alertDiv.style.alignItems = "center";
        alertDiv.style.gap = "0.75rem";
        alertDiv.style.animation = "fadeIn 0.3s ease-out";
        alertDiv.style.fontWeight = "500";
        alertDiv.style.letterSpacing = "-0.2px";

        if (type === "success") {
          alertDiv.style.backgroundColor = "rgba(48, 209, 88, 0.1)";
          alertDiv.style.color = "var(--success-color)";
          alertDiv.style.border = "1px solid var(--success-color)";
        } else if (type === "warning") {
          alertDiv.style.backgroundColor = "rgba(255, 159, 10, 0.1)";
          alertDiv.style.color = "var(--warning-color)";
          alertDiv.style.border = "1px solid var(--warning-color)";
        } else {
          alertDiv.style.backgroundColor = "rgba(255, 69, 58, 0.1)";
          alertDiv.style.color = "var(--danger-color)";
          alertDiv.style.border = "1px solid var(--danger-color)";
        }

        const icon = document.createElement("i");
        if (type === "success") {
          icon.className = "fas fa-check-circle";
        } else if (type === "warning") {
          icon.className = "fas fa-exclamation-triangle";
        } else {
          icon.className = "fas fa-exclamation-circle";
        }

        const messageSpan = document.createElement("span");
        messageSpan.textContent = message;

        alertDiv.appendChild(icon);
        alertDiv.appendChild(messageSpan);

        document.body.appendChild(alertDiv);

        // Auto-remove after 3 seconds
        setTimeout(() => {
          alertDiv.style.animation = "fadeOut 0.3s ease-out";
          setTimeout(() => alertDiv.remove(), 300);
        }, 3000);
      }
    </script>
  </body>
</html>
